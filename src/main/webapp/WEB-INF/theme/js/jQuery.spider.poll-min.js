(function($){var defaults={title:null,titleColor:"#C3C3C3",titleFontSize:"15px",titleAlign:"center",width:"500px",speed:1000,bgImg:"../../theme/img/vote/bg.gif",multiple:false,showPoll:false,data:"",itelTotal:6,itemStyle:{fontSize:"12px",bgColor:"#fffae2"}};$.fn.poll=function(id,options){options=$.extend(defaults,options);var dataObj=eval("("+options.data+")");var o=this;var total=0;$.each(dataObj.root,function(i,n){total+=parseInt(n.value)});$(this).append("<table id='"+id+"' border='0' style='font-size:"+options.itemStyle.fontSize+";' width='"+defaults.width+"'></table>");if(null!=options.title){$("table",this).append("<tr><td colspan=4 align='"+options.titleAlign+"' ><span style='color:"+options.titleColor+";font-size:"+options.titleFontSize+";'>"+options.title+"</span></td></tr>")}var itemDiv;$.each(dataObj.root,function(i,n){var index=0;var percentage=(n.value/total*100).toFixed(2);if(isNaN(percentage)){percentage=0}var imgWidth=parseFloat(percentage);if(imgWidth>0){if(i>(options.itelTotal-1)){index=i-(options.itelTotal-1)}else{index=i}itemDiv="<div style='background-color:"+options.itemStyle.bgColor+";font-size:"+options.itemStyle.fontSize+"'><div divWidth='"+imgWidth+"' style='width:0%;background-image:url("+options.bgImg+");' class='poll_plan"+index+"' ><div class='plan_e' style='background-image:url("+options.bgImg+");'><div class='plan_c'  style='background-image:url("+options.bgImg+");'></div></div></div></div>"}else{itemDiv=""}$("table",o).append("<tr><td width='30%' align='right' >"+n.name+":</td><td width='60%' bgcolor='"+options.itemStyle.bgColor+"' >"+itemDiv+"</td><td width='10%' nowrap >"+n.value+"("+percentage+"%)</td></tr>");if(options.showPoll){if(options.multiple){$("tr:last").append("<td><input type='checkbox' name='poll_"+id+"' value='"+n.id+"'/></td>")}else{$("tr:last").append("<td><input type='radio' name='poll_"+id+"' value='"+n.id+"'/></td>")}}});$("div",o).each(function(i,n){if($(n).attr("divWidth")){$(n).animate({width:$(n).attr("divWidth")+"%"},options.speed);$(n).removeAttr("divWidth")}});return this};$.fn.getChecked=function(){var checked_val;return $(":checked",this)}})(jQuery);
